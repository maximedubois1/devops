version: '3.8'

services:
    backend:
        container_name: back
        build: BackendAPI/simple-api-student
        networks:
          - my-network
        depends_on:
          - database
        env_file:
          - database.env
  
    database:
        container_name: database
        build: database
        networks:
          - my-network
        env_file:
          - database.env
        volumes:
          - data:/var/lib/postgresql/data

    httpd:
        container_name: front
        build: Front
        ports:
          - 80:80
          - 8080:8080
        networks:
          - my-network
        depends_on:
          - backend

    www:
        container_name: www
        build: Front/devops-front-main
        networks:
          - my-network
        depends_on:
          - backend

networks:
    my-network:

volumes:
    data: